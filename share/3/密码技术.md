# 密码技术简介

## 为什么需要加密

消息在传递的过程中:

* 可能被窃听 ( 机密性 )
* 可能被篡改 ( 完整性 )
* 无法证明是否由真正的用户发送 ( 认证 )
* 无法防止否认 ( 不可否认性 )



## 加密方式

### 凯撒密码

将每一个字母向后平移 n 个位置

#### 缺点: 容易被暴力破解



### 简单替换密码

将一个字符替换为另一个字符, 密码空间变大, 暴力破解成本高

#### 破译方式: 频率分析

通过分析每个字母出现的频率, 和正常文章中出现频率相似的字母进行替换, 可以得到明文



### 异或运算加密

#### 异或运算: 两个值不同时, 结果为真. 即: 0 异或 1 = 1, 1 异或 1 = 0, 0 异或 0 = 0

将数据和密钥进行异或运算, 即可得到密文, 将密文和密钥进行异或运算, 即可得到明文



#### 一次性密码本

> 密钥的长度和数据的长度相同, 进行异或运算加密. 优点是无法破译, 因为要破译的话, 需要尝试所有可能的组合, 但是确不知道组合中哪个结果才是正确的.

##### 缺点: 密钥传输不便, 密钥无法复用( 复用的话就会面临频率分析的威胁 )



### 对称密码

> 加密算法是公开的, 密钥是保密的, 这样可以保证算法的安全性.



#### 常用对称加密算法

* DES
* AES



> DES 已经被证明是不安全的, 目前只需要几个小时便可以破译, 目前常用的对称加密算法为 三重DES 或 AES



#### 缺点

对称加密中的密钥如果泄露的话, 就会导致加密的信息被破解. 所以如何安全的传递密钥是一个问题



#### 对称加密的密钥分配方案

* 事先共享, 这个好理解, 就是两个人见面找个安全的地方进行密钥的交换
  * 缺点: 不够方便
* 密钥分配中心, 每次根据个人的私钥, 到分配中心领取一个会话密钥, 通过会话密钥和对方通信
  * 缺点: 分配中心如果被攻破, 所有人的密钥都不安全了
* 非对称加密



### 非对称加密

> 公钥加密, 私钥解密

1. A 生成包含 公钥/私钥 的密钥对
2. 公钥给 B
3. B 使用 A 的公钥进行加密, 将消息发送给 A
4. A 使用私钥进行解密

#### 缺点, 加密效率低, 一般比对称加密慢几百倍, 并且无法防范中间人攻击



### 中间人攻击

1. A 将自己的公钥发给 B
2. 中间人 E 截获了 A 的公钥, 并将自己的公钥发给 B
3. B 使用 E 的公钥对消息进行加密, 并发给 A
4. E 对消息进行拦击, 用自己的私钥解密, 用 A 的公钥加密, 发送给 A
5. A 用 自己的私钥解密

这个过程, A 和 B 是无感知的, 但是实际消息已经泄露了



### 散列函数 ( 哈希函数 )

> 散列函数用于将数据处理为一段长度固定的字符串 ( 散列值 ).

特点: 

* 对与不同的数据, 经过散列函数处理过的结果是不同的.
* 能够快速的计算出散列值
* 只能通过内容计算出散列值, 无法通过散列值反向推出内容 ( 单向性 )



#### 常用散列函数

* MD4 ( 不安全 )
* MD5 ( 不安全 )
* SHA-1 ( 不安全 )
* SHA-2: SHA-256, SHA-384, SHA-512
* SHA-3
* RIPEMD-160



### 消息认证码

消息认证码是在散列函数的基础上, 再加上自己的密钥, 生成的一份特征码, 通过这个特征码, 可以确定消息有没有没篡改, 如果被篡改, 通过散列函数计算出的结果和接收到的结果是不一样的.



### 重放攻击

将消息拦截, 并重复发送. 可以想象: 将转账消息保存, 发送多次, 就可以完成多次转账了

#### 解决方式

* 将每次消息加上序号
  * 缺点: 维护序号的统一比较困难
* 时间戳
  * 发送方时间和接收方时间不一致, 还是有被重放攻击的可能
* 随机数 ( 常用 )





















